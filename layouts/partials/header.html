<header class="w-full px-4 pt-4 max-w-5xl mx-auto">
  <nav class="flex items-center justify-between flex-wrap">
    <div class="flex gap-2 items-center">
      {{ with .Site.Params.authorEmail}}
      <a href="mailto:{{.}}" aria-label="EMail" class="email-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="4" />
          <path d="M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28" />
        </svg>
      </a>
      {{end}}
      <a href="{{ .Site.Home.Permalink }}" class="brand-link flex items-center font-bold">
        {{ .Site.Title }}
      </a>
    </div>

    <style>
      @media (max-width: 700px) {
        #nav-menu {
          display: none !important;
        }

        #mobile-nav-btn {
          display: flex !important;
        }
      }

      @media (min-width: 701px) {

        #mobile-nav-btn,
        #mobile-nav-dropdown {
          display: none !important;
        }

        #nav-menu {
          display: flex !important;
        }
      }

      #mobile-nav-dropdown {
        position: absolute;
        right: 1.5rem;
        top: 3.5rem;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(16px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 1rem;
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        z-index: 1000;
        padding: 0.5rem;
        min-width: 200px;
      }

      @media (prefers-color-scheme: dark) {
        #mobile-nav-dropdown {
          background: rgba(17, 24, 39, 0.95);
          border-color: rgba(55, 65, 81, 0.5);
        }
      }

      #mobile-nav-dropdown a {
        display: block;
        padding: 0.75rem 1rem;
        border-radius: 0.75rem;
        font-weight: 600;
        color: #374151;
        text-decoration: none;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      #mobile-nav-dropdown a::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
        transition: left 0.6s ease;
      }

      #mobile-nav-dropdown a:hover::before {
        left: 100%;
      }

      #mobile-nav-dropdown a:hover {
        background: rgba(59, 130, 246, 0.1);
        color: #2563eb;
        transform: translateX(4px);
      }

      @media (prefers-color-scheme: dark) {
        #mobile-nav-dropdown a {
          color: #f3f4f6;
        }

        #mobile-nav-dropdown a:hover {
          background: rgba(59, 130, 246, 0.2);
          color: #60a5fa;
        }
      }
      
      /* Brand Link Styles */
      .brand-link {
        padding: 0.5rem 1rem;
        border-radius: 0.75rem;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        text-decoration: none;
        color: inherit;
      }
      
      .brand-link::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(37, 99, 235, 0.1), transparent);
        transition: left 0.6s ease;
      }
      
      .brand-link:hover::before {
        left: 100%;
      }
      
      .brand-link:hover {
        background: rgba(37, 99, 235, 0.1);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(37, 99, 235, 0.2);
        transform: translateY(-1px);
        box-shadow: 0 4px 16px rgba(37, 99, 235, 0.15);
        color: #2563eb;
      }
      
      @media (prefers-color-scheme: dark) {
        .brand-link:hover {
          background: rgba(96, 165, 250, 0.15);
          border-color: rgba(96, 165, 250, 0.3);
          color: #60a5fa;
          box-shadow: 0 4px 16px rgba(96, 165, 250, 0.1);
        }
      }
      
      /* Email Link Styles */
      .email-link {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem;
        border-radius: 50%;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        text-decoration: none;
        color: inherit;
        width: 2.5rem;
        height: 2.5rem;
      }
      
      .email-link::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(37, 99, 235, 0.1), transparent);
        transition: left 0.6s ease;
      }
      
      .email-link:hover::before {
        left: 100%;
      }
      
      .email-link:hover {
        background: rgba(37, 99, 235, 0.1);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(37, 99, 235, 0.2);
        transform: translateY(-1px) scale(1.05);
        box-shadow: 0 4px 16px rgba(37, 99, 235, 0.15);
        color: #2563eb;
      }
      
      .email-link:hover svg {
        transform: rotate(5deg);
      }
      
      @media (prefers-color-scheme: dark) {
        .email-link:hover {
          background: rgba(96, 165, 250, 0.15);
          border-color: rgba(96, 165, 250, 0.3);
          color: #60a5fa;
          box-shadow: 0 4px 16px rgba(96, 165, 250, 0.1);
        }
      }
    </style>
    <button id="mobile-nav-btn" aria-label="Open menu"
      style="display:none;align-items:center;justify-content:center;background:none;border:none;padding:0.5rem 0.7rem;cursor:pointer;">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <line x1="3" y1="12" x2="21" y2="12" />
        <line x1="3" y1="6" x2="21" y2="6" />
        <line x1="3" y1="18" x2="21" y2="18" />
      </svg>
    </button>
    <ul id="nav-menu" class="flex w-auto mt-0 space-x-2">
      <style>
        .nav-box {
          background: rgba(255, 255, 255, 0.9);
          backdrop-filter: blur(12px);
          border: 1px solid rgba(255, 255, 255, 0.2);
          border-radius: 1rem;
          padding: 0.75rem 1.5rem;
          margin: 0 0.25rem;
          transition: all 0.3s ease-in-out;
          box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1);
          position: relative;
          overflow: hidden;
        }

        .nav-box::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
          transition: left 0.6s ease;
        }

        .nav-box:hover::before {
          left: 100%;
        }

        .nav-box a {
          font-weight: 600;
          position: relative;
          z-index: 1;
          transition: color 0.3s ease;
        }

        .nav-box:hover {
          background: rgba(59, 130, 246, 0.1);
          border-color: rgba(59, 130, 246, 0.3);
          transform: translateY(-2px);
          box-shadow: 0 8px 25px -5px rgba(59, 130, 246, 0.2);
        }

        .nav-box:hover a {
          color: #2563eb;
        }

        @media (prefers-color-scheme: dark) {
          .nav-box {
            background: rgba(17, 24, 39, 0.8);
            border-color: rgba(55, 65, 81, 0.5);
          }

          .nav-box:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
          }

          .nav-box:hover a {
            color: #60a5fa;
          }
        }
      </style>
      {{ with .Site.GetPage "/about" }}
      <li class="nav-box">
        <a href="{{ .Permalink }}" class="hover:text-blue-800 dark:hover:text-blue-300">{{ .Title }}</a>
      </li>
      {{ end }}
      {{ with .Site.GetPage "/services" }}
      <li class="nav-box">
        <a href="{{ .Permalink }}" class="hover:text-blue-800 dark:hover:text-blue-300">{{ .Title }}</a>
      </li>
      {{ end }}
    </ul>
    <div id="mobile-nav-dropdown" style="display:none;">
      {{ with .Site.GetPage "/about" }}
      <a href="{{ .Permalink }}">{{ .Title }}</a>
      {{ end }}
      {{ with .Site.GetPage "/services" }}
      <a href="{{ .Permalink }}">{{ .Title }}</a>
      {{ end }}
    </div>
    <script>
      const btn = document.getElementById('mobile-nav-btn');
      const dropdown = document.getElementById('mobile-nav-dropdown');
      let open = false;
      if (btn && dropdown) {
        btn.onclick = function (e) {
          e.stopPropagation();
          open = !open;
          dropdown.style.display = open ? 'block' : 'none';
        };
        document.addEventListener('click', function (e) {
          if (open && !dropdown.contains(e.target) && e.target !== btn) {
            dropdown.style.display = 'none';
            open = false;
          }
        });
      }
    </script>
  </nav>
</header>