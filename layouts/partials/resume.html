<section class="my-4 mx-auto flex flex-col items-center">
  <div class="space-y-8 w-full">
    <!-- Working Experience -->
    <div>
      <div class="text-2xl font-semibold mb-4 text-center underline decoration-2 decoration-primary">Working Experience
        & Education
      </div>
      <div class="relative flex items-center">
        <button class="absolute left-0 z-10 p-2 shadow-md" onclick="scrollLeftAction('work')">&#9664;</button>
        <div id="work"
          class="flex overflow-x-auto space-x-2 sm:space-x-4 scrollbar-hide w-full mx-auto transition-all duration-300 justify-center md:justify-center">
          {{ range .Site.Params.homepage.resume.work }}
          <div
            class="flex-shrink-0 w-64 max-w-xs sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 2xl:w-1/6 text-center resume-entry">
            <div class="image-container">
              <img src="{{.logo}}" alt="{{.name}} Logo">
            </div>
            <p class="my-1 font-bold leading-tight text-base sm:text-lg md:text-xl lg:text-lg xl:text-base">{{.role}}
            </p>
            <p class="my-1 font-light text-sm" v-if=".role2">{{.role2}}</p>
            <p class="my-1 font-light text-sm" v-if=".role3">{{.role3}}</p>
            <p class="text-gray-500 my-1">{{.duration}}</p>
          </div>
          {{ end }}
        </div>
        <button class="absolute right-0 z-10 p-2 shadow-md" onclick="scrollRightAction('work')">&#9654;</button>
      </div>
    </div>

    <!-- Skills -->
    <div>
      <div class="text-2xl font-semibold mb-4 text-center underline decoration-2 decoration-primary">Skills & Tools
      </div>
      <div class="relative flex items-center">
        <button class="absolute left-0 z-10 p-2 shadow-md" onclick="scrollLeftAction('skills')">&#9664;</button>
        <div id="skills"
          class="flex overflow-x-auto space-x-2 sm:space-x-4 scrollbar-hide w-full mx-auto transition-all duration-300 justify-center md:justify-center">
          {{ range .Site.Params.homepage.resume.skills }}
          <div class="flex-shrink-0 w-64 max-w-xs sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 2xl:w-1/6 text-center">
            <div class="image-container">
              <img src="{{.image}}" alt="{{.name}} Image">
            </div>
            <div class="my-1 font-bold leading-tight text-base sm:text-lg md:text-xl lg:text-lg xl:text-base">{{.name}}
            </div>
            <p class="my-1 font-light text-sm leading-tight" v-if=".description">{{.description}}</p>
          </div>
          {{ end }}
        </div>
        <button class="absolute right-0 z-10 p-2 shadow-md" onclick="scrollRightAction('skills')">&#9654;</button>
      </div>
    </div>

    <!-- Courses -->
    <div>
      <div class="text-2xl font-semibold mb-4 text-center underline decoration-2 decoration-primary">Courses</div>
      <div class="relative flex items-center">
        <button class="absolute left-0 z-10 p-2 shadow-md" onclick="scrollLeftAction('courses')">&#9664;</button>
        <div id="courses"
          class="flex overflow-x-auto space-x-2 sm:space-x-4 scrollbar-hide w-full mx-auto transition-all duration-300 justify-center md:justify-center">
          {{ range .Site.Params.homepage.resume.courses }}
          <div class="flex-shrink-0 w-64 max-w-xs sm:w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 2xl:w-1/6 text-center">
            <div class="image-container">
              <img src="{{.image}}" alt="{{.name}} Image">
            </div>
            <div class="my-1 font-bold leading-tight text-base sm:text-lg md:text-xl lg:text-lg xl:text-base">{{.name}}
            </div>
            <p class="my-1 font-light text-sm leading-tight">by {{.provider}}</p>
          </div>
          {{ end }}
        </div>
        <button class="absolute right-0 z-10 p-2 shadow-md" onclick="scrollRightAction('courses')">&#9654;</button>
      </div>
    </div>
  </div>
</section>

<script>
  function scrollLeftAction(id) {
    const container = document.getElementById(id);
    const firstChildWidth = container.children[0]?.offsetWidth || 0;
    container.scrollBy({ left: -firstChildWidth, behavior: 'smooth' });
  }

  function scrollRightAction(id) {
    const container = document.getElementById(id);
    const firstChildWidth = container.children[0]?.offsetWidth || 0;
    container.scrollBy({ left: firstChildWidth, behavior: 'smooth' });
  }

  function updateScrollIcons() {
    ['work', 'skills', 'courses'].forEach(id => {
      const container = document.getElementById(id);
      if (!container) return;
      const leftBtn = container.parentElement.querySelector('button.absolute.left-0');
      const rightBtn = container.parentElement.querySelector('button.absolute.right-0');
      if (container.scrollWidth > container.clientWidth + 10) {
        // Liste ist zu lang, Icons anzeigen
        if (leftBtn) leftBtn.style.display = '';
        if (rightBtn) rightBtn.style.display = '';
      } else {
        // Alles passt, Icons ausblenden
        if (leftBtn) leftBtn.style.display = 'none';
        if (rightBtn) rightBtn.style.display = 'none';
      }
    });
  }

  window.addEventListener('resize', updateScrollIcons);
  document.addEventListener('DOMContentLoaded', updateScrollIcons);
</script>

<style>
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    /* IE and Edge */
    scrollbar-width: none;
    /* Firefox */
  }

  .image-container {
    width: 150px;
    height: 150px;
    display: flex;
    align-items: center;
    justify-content: center;
    /* Optional: Background color for non-square images */
    overflow: hidden;
    margin-left: auto;
    margin-right: auto;
    border-radius: 20px;
  }

  .image-container img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

  @media (max-width: 768px) {
    .relative>button {
      display: none;
    }

    .space-x-4> :not([hidden])~ :not([hidden]) {
      margin-left: 0.5rem !important;
      margin-right: 0.5rem !important;
    }

    .space-x-2> :not([hidden])~ :not([hidden]) {
      margin-left: 0.1rem !important;
      margin-right: 0.1rem !important;
    }

    .image-container {
      width: 80px;
      /* Noch kleinere Breite für sehr kleine Geräte */
      height: 80px;
      /* Noch kleinere Höhe für sehr kleine Geräte */
    }

    .max-w-xs {
      max-width: 30vw !important;
      padding-right: 7px;
      padding-left: 7px;
    }

    .resume-entry {
      margin-left: 7px !important;
      margin-right: 7px !important;
    }
  }
</style>